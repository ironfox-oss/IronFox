#!/bin/bash
# shellcheck disable=SC2034

# Sources
APPSERVICES_VERSION="v146.0.2"
#APPSERVICES_VERSION="release-v145"
FIREFOX_VERSION="146.0"
#FIREFOX_RELEASE_TAG="FIREFOX-ANDROID_${FIREFOX_VERSION//./_}_RELEASE"
FIREFOX_RELEASE_TAG="FIREFOX-ANDROID_${FIREFOX_VERSION//./_}_BUILD1"
#FIREFOX_RELEASE_TAG="FIREFOX-ANDROID_${FIREFOX_VERSION//./_}_BUILD2"
FIREFOX_RELEASE_PATH="releases/${FIREFOX_VERSION}"
GLEAN_VERSION="v66.1.2"

IRONFOX_VERSION="${FIREFOX_VERSION}"

## Dependencies
GMSCORE_VERSION="v0.3.10.250932"
PHOENIX_VERSION="2025.11.27.1"
UNIFIEDPUSH_VERSION="3.1.2"
WASI_VERSION="20"
WASI_BRANCH="wasi-sdk-$WASI_VERSION"

# Tools
BUNDLETOOL_VERSION="1.18.2"
CBINDGEN_VERSION="0.29.2"
LLVM_VERSION="20.1.8"
#RUST_MAJOR_VERSION="1.91"
#RUST_VERSION="${RUST_MAJOR_VERSION}.0"
RUST_MAJOR_VERSION="1.91.1"
RUST_VERSION="${RUST_MAJOR_VERSION}"
UNIFFI_VERSION="0.29.0"

# For prebuilds
UNIFFI_LINUX_IRONFOX_COMMIT="d3c80ad75cb50e4920759512c0d8308b24450be9"
UNIFFI_LINUX_IRONFOX_REVISION="1"
UNIFFI_OSX_IRONFOX_COMMIT="f6df2826de9087fe453528064a056ba36977c3be"
UNIFFI_OSX_IRONFOX_REVISION="1"
WASI_LINUX_IRONFOX_COMMIT="d3c80ad75cb50e4920759512c0d8308b24450be9"
WASI_LINUX_IRONFOX_REVISION="2"
WASI_OSX_IRONFOX_COMMIT="cd4aa6997cc1856f3f5959b15c72853289bc1f2c"
WASI_OSX_IRONFOX_REVISION="1"

# Configuration
ROOTDIR="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)"
ENV_SH="${ROOTDIR}/scripts/env_local.sh"
BUILDDIR="${ROOTDIR}/build"
PATCHDIR="${ROOTDIR}/patches"
GECKODIR="${ROOTDIR}/gecko"
ANDROID_COMPONENTS="${GECKODIR}/mobile/android/android-components"
APPSERVICESDIR="${ROOTDIR}/application-services"
BUNDLETOOLDIR="$BUILDDIR/bundletool"
FENIX="${GECKODIR}/mobile/android/fenix"
GLEANDIR="${ROOTDIR}/glean"
GMSCOREDIR="${ROOTDIR}/gmscore"
UNIFFIDIR="${ROOTDIR}/uniffi"
WASISDKDIR="${ROOTDIR}/wasi-sdk"

# Use GNU Sed on macOS instead of the built-in sed, due to differences in syntax
if [[ "$OSTYPE" == "darwin"* ]]; then
    SED=gsed
else
    SED=sed
fi
